<?xml version="1.0" encoding="UTF-8"?>
<!--
 ! Source code generated by Celerio, a Jaxio product.
 ! Documentation: http://www.jaxio.com/documentation/celerio/
 ! Follow us on twitter: @jaxiosoft
 ! Need commercial support ? Contact us: info@jaxio.com
 ! Template pack-rcic:src/main/resources/sqlmap/modules/SqlMap.e.vm.xml
-->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.lx.rcic.modules.dataapi.mapper.ApiProvdInfoMapper">

    <resultMap id="apiProvdInfoResultMap" type="kr.or.lx.rcic.modules.dataapi.entity.ApiProvdInfo">
        <!-- API제공번호 -->
        <result property="id" column="api_provd_no"/>
        <!-- API정보명 -->
        <result property="apiInfoNm" column="api_info_nm"/>
        <!-- API제공URL -->
        <result property="apiProvd_Url" column="api_provd__url"/>
        <!-- 사용여부 -->
        <result property="useYn" column="use_yn"/>
    </resultMap>

    <sql id="whereConditions">
        <where>
            <include refid="conditions" />
        </where>
    </sql>

    <sql id="conditions">
        <if test="id != null">
            AND api_provd_no = #{id}
        </if>
        <if test="apiInfoNm != null and apiInfoNm != ''">
            AND api_info_nm = #{apiInfoNm}
        </if>
        <if test="apiProvd_Url != null and apiProvd_Url != ''">
            AND api_provd__url = #{apiProvd_Url}
        </if>
        <if test="useYn != null and useYn != ''">
            AND use_yn = #{useYn}
        </if>
    </sql>

    <select id="getApiProvdInfo" resultMap="apiProvdInfoResultMap">
        /* kr.or.lx.rcic.modules.apiProvdInfo.mapper.ApiProvdInfoMapper.getApiProvdInfo */

        SELECT
            api_provd_no, api_info_nm, api_provd__url, use_yn
        FROM rcic.tb_api_provd_info
        WHERE
         api_provd_no = #{id}
	</select>

    <select id="selectApiProvdInfoCnt" resultType="int">
        /* kr.or.lx.rcic.modules.dataapi.mapper.ApiProvdInfoMapper.simpleListApiProvdInfoCnt */

        SELECT COUNT(*)
        FROM rcic.tb_api_provd_info
        <include refid="whereConditions" />
    </select>

    
    <select id="selectApiProvdInfoList" resultType="egovMap">
        <include refid="common.headerRow"/>
        SELECT
            API_PROVD_NO,
			API_INFO_NM,
			API_DC,
			API_PROVD__URL,
			DMAX_REQ_CNT,
			USE_YN,
			TO_CHAR(REGIST_DT, 'YYYY-MM-DD' ) AS REGIST_DT,
		    TO_CHAR(UPDT_DT, 'YYYY-MM-DD' ) AS UPDT_DT,
		    (SELECT COUNT(*) FROM RCIC.TB_API_USE_DTL D WHERE D.API_PROVD_NO=API_PROVD_NO) AS CNT
        FROM RCIC.TB_API_PROVD_INFO
        <include refid="whereConditions" />
        ORDER BY REGIST_DT DESC
        <include refid="common.footerRow"/>
	</select>

    <update id="updateApiProvdInfo" parameterType="kr.or.lx.rcic.modules.dataapi.entity.ApiProvdInfo">
        /* kr.or.lx.rcic.modules.apiProvdInfo.mapper.ApiProvdInfoMapper.updateApiProvdInfo */

        UPDATE rcic.tb_api_provd_info
        SET
               api_info_nm = #{apiInfoNm}
                    , api_provd__url = #{apiProvd_Url}
                    , use_yn = #{useYn}
              WHERE
             api_provd_no = #{id}
    </update>

    <update id="updateApiProvdInfoDynamic" parameterType="kr.or.lx.rcic.modules.dataapi.entity.ApiProvdInfo">
        /* kr.or.lx.rcic.modules.dataapi.mapper.ApiProvdInfoMapper.updateApiProvdInfoDynamic */

        UPDATE rcic.tb_api_provd_info
            <set>
            <if test="apiInfoNm != null and apiInfoNm != ''">
                api_info_nm = #{apiInfoNm},
            </if>
            <if test="apiProvd_Url != null and apiProvd_Url != ''">
                api_provd__url = #{apiProvd_Url},
            </if>
            <if test="useYn != null and useYn != ''">
                use_yn = #{useYn},
            </if>
            </set>
        WHERE
             api_provd_no = #{id}
    </update>

    <delete id="deleteApiProvdInfo" parameterType="kr.or.lx.rcic.modules.dataapi.entity.ApiProvdInfo">
        /* kr.or.lx.rcic.modules.apiProvdInfo.mapper.ApiProvdInfoMapper.deleteApiProvdInfo */

        DELETE FROM rcic.tb_api_provd_info
        WHERE
             api_provd_no = #{id}
    </delete>

    <insert id="insertApiProvdInfo">
        /* kr.or.lx.rcic.modules.apiProvdInfo.mapper.ApiProvdInfoMapper.insertApiProvdInfo */
        INSERT INTO rcic.tb_api_provd_info
        (
        api_provd_no, api_info_nm, api_provd__url, use_yn
        )
        VALUES (
        #{id},
        #{apiInfoNm},
        #{apiProvd_Url},
        #{useYn}
        )
	</insert>

</mapper>

